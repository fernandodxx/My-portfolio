---
layout: post
title: "Sistema de Reservas de Voos"
date: 2025-09-07
---

## Hello World!

This is my first blog post, built with Bridgetown and Bulma.
Here I'll share my thoughts on programming, technology, and other interesting topics.

## Introdução 
Recentemente, desenvolvi um sistema de reservas de voos utilizando Ruby on Rails, onde os usuários podem pesquisar voos, selecionar o voo desejado e inserir suas informações pessoais para concluir a reserva. Este post tem como objetivo compartilhar os detalhes do desenvolvimento dessa aplicação.

## Funcionalidades da Aplicação
### 1. Pesquisa de Voos
Na tela de pesquisa, o usuário pode selecionar o aeroporto de partida, aeroporto de chegada, data do voo e o número de passageiros. As opções de aeroportos são carregadas dinamicamente a partir do banco de dados, e o menu suspenso de datas mostra apenas os dias com voos disponíveis.

```ruby
class FlightsController < ApplicationController
  def index
    @airports = Airport.all
    @dates = Flight.pluck(:start_datetime).map { |d| d.to_date }.uniq
    @flights = []

    if params[:departure_airport_id].present? && params[:arrival_airport_id].present? && params[:date].present?
      @flights = Flight.where(
        departure_airport_id: params[:departure_airport_id],
        arrival_airport_id: params[:arrival_airport_id],
        start_datetime: params[:date].to_date.all_day
      )
    end
  end
end
```

### 3. Captura das Informações dos Passageiros
Após selecionar o voo, o usuário insere as informações pessoais de cada passageiro. Cada passageiro recebe um campo de nome e e-mail, e as informações são enviadas para criar a reserva.
```ruby
class BookingsController < ApplicationController
  def new
    @flight = Flight.find(params[:flight_id])
    @booking = Booking.new(flight: @flight, passengers_count: params[:passengers])
    params[:passengers].to_i.times { @booking.passengers.build }
  end

  def create
    @booking = Booking.new(booking_params)
    if @booking.save
      redirect_to @booking, notice: 'Reserva criada com sucesso!'
    else
      render :new
    end
  end

  private

  def booking_params
    params.require(:booking).permit(:flight_id, :passengers_count, passengers_attributes: [:name, :email])
  end
end
```

## Tecnologias Utilizadas
* **Ruby on Rails:** Utilizado para construir o backend da aplicação, com ActiveRecord para gerenciar as associações entre voos, reservas e passageiros.
* **HTML e ERB:** Para construir as páginas de visualização com os formulários e exibir os dados.
* **PostgreSQL:** Banco de dados para armazenar os voos, reservas e informações dos passageiros.